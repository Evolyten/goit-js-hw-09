{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,SAGA,MAAMC,EAASC,SAASC,cAAc,SAGhCC,EAAO,CAEXC,YAAaJ,EAAOE,cAAc,kBAClCG,YAAYL,EAAOE,cAAc,iBACjCI,SAAUN,EAAOE,cAAc,mBAC/BK,UAAWP,EAAOE,cAAc,WAGlC,IAAIM,EAAM,GACVR,EAAOS,iBAAiB,SACxB,SAAkBC,GACf,IAAIC,EAAOD,EAAEE,OAAOD,KACnBH,EAAIG,GAAOE,OAAOH,EAAEE,OAAOE,OAC3BC,QAAQC,IAAIN,EAAEE,OAAOD,SAEzB,IAAIM,EAAO,KAsBX,SAASC,IA+BT,IAAqBC,EAASC,EA9BxBZ,EAAIW,SAAWX,EAAIa,SAGrBb,EAAIW,SAAW,EACfJ,QAAQC,IAAI,MAAMR,GAClBO,QAAQC,IAAI,YAAYR,EAAIc,WAC5BP,QAAQC,IAAI,WAAWR,EAAIW,SAwBVA,EAtBLX,EAAIW,QAsBUC,EAtBDZ,EAAIc,UASjC,SAAuBC,EAAWC,GAChC,MAAMC,EAAgBC,KAAKC,SAAW,GACtC,OAAO,IAAIC,SAAQ,CAACC,EAASC,KACvBL,EACDI,EAAQ,CAACE,SAASR,EAAWS,MAAMR,IAEpCM,EAAO,CAACC,SAASR,EAAWS,MAAMR,OAQtCS,CAAcd,EAAQC,GAASc,MAAK,EAACH,SAAEA,EAAQC,MAAEA,MAC/CG,EAAArC,GAASsC,OAAOC,QAAQ,uBAAqBN,QAAiBC,UAE/DM,OAAM,EAACP,SAAEA,EAAQC,MAAEA,MAClBG,EAAArC,GAASsC,OAAOG,QAAQ,sBAAoBR,QAAeC,UAzB3DxB,EAAIc,WAAYd,EAAIgC,KAEpBvB,EAAKwB,WAAWvB,EAASV,EAAIgC,OA/BjCrC,EAAKI,UAAUE,iBAAiB,SAAUiC,IACpClC,EAAIwB,OAASxB,EAAIgC,MAAQhC,EAAIa,OAQnC,SAAmBqB,GACjBA,EAAMC,iBACNnC,EAAIW,QAAU,EACdX,EAAIc,UAAYd,EAAIwB,MAEmBf,EAAhCwB,WAAWvB,EAASV,EAAIc,WAbYsB,CAAUF,GACnDP,EAAArC,GAASsC,OAAOG,QAAQ","sources":["src/js/03-promises.js"],"sourcesContent":["import Notiflix from 'notiflix';\n  \n\nconst formEl = document.querySelector('.form')\n\n\nconst refs = {\n\n  firsDelayEl: formEl.querySelector('[name=\"delay\"]'),\n  stepDelayEl:formEl.querySelector('[name=\"step\"]'),\n  amountEl: formEl.querySelector('[name=\"amount\"]'),\n  submitBtn: formEl.querySelector('button')\n  \n}\nlet obj = {}\nformEl.addEventListener('input', userData)\nfunction userData(e) {\n   let name = e.target.name\n    obj[name]= Number(e.target.value)\n    console.log(e.target.name) \n}\nlet time = null;\n\n\n\nrefs.submitBtn.addEventListener('click', (event) => {\n  if (obj.delay && obj.step && obj.amount) { starTimer(event) } else {\n    Notiflix.Notify.failure(`❌ Fill all fields`);\n    \n  } \n    \n})\n\n\nfunction starTimer(event) {\n  event.preventDefault()\n  obj.counter = 0\n  obj.delayTime = obj.delay//для записи первого значения в вреиени в промис\n\n  time = setTimeout(timerUp, obj.delayTime)\n}\n\n\nfunction timerUp() {\n  if (obj.counter >= obj.amount) {\n\n  } else {\n    obj.counter += 1\n    console.log(\"obj\",obj)\n    console.log(\"delayTIme\",obj.delayTime)\n    console.log(\"position\",obj.counter)\n    \n    promiseCall(obj.counter, obj.delayTime)\n\n    obj.delayTime +=obj.step \n\n    time=setTimeout(timerUp, obj.step)\n  }\n\n}\n\nfunction createPromise(positions, delays) {\n  const shouldResolve = Math.random() > 0.3;\n  return new Promise((resolve, reject)=>{\n    if (shouldResolve){\n       resolve({position:positions, delay:delays})\n    } else (\n      reject({position:positions, delay:delays})\n    )\n   \n  })\n}\n\n\nfunction promiseCall(counter, timeOut) {\n  createPromise(counter,timeOut).then(({ position, delay }) => {\n    Notiflix.Notify.success(`✅ Fulfilled promise ${position} in ${delay}ms`);\n  })\n  .catch(({ position, delay }) => {\n    Notiflix.Notify.failure(`❌ Rejected promise ${position} in ${delay}ms`);\n  });\n}\n\n\n\n"],"names":["$eWCmQ","parcelRequire","$47d4ff9957288465$var$formEl","document","querySelector","$47d4ff9957288465$var$refs","firsDelayEl","stepDelayEl","amountEl","submitBtn","$47d4ff9957288465$var$obj","addEventListener","e","name","target","Number","value","console","log","$47d4ff9957288465$var$time","$47d4ff9957288465$var$timerUp","counter","timeOut","amount","delayTime","positions","delays","shouldResolve","Math","random","Promise","resolve","reject","position","delay","$47d4ff9957288465$var$createPromise","then","$parcel$interopDefault","Notify","success","catch","failure","step","setTimeout","event","preventDefault","$47d4ff9957288465$var$starTimer"],"version":3,"file":"03-promises.8fea0817.js.map"}